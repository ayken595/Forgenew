{"remainingRequest":"/home/maciej/Pulpit/admin-one-vue-bulma-dashboard-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/maciej/Pulpit/admin-one-vue-bulma-dashboard-master/src/views/list.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/maciej/Pulpit/admin-one-vue-bulma-dashboard-master/src/views/list.vue","mtime":1573749418710},{"path":"/home/maciej/Pulpit/admin-one-vue-bulma-dashboard-master/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/maciej/Pulpit/admin-one-vue-bulma-dashboard-master/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/maciej/Pulpit/admin-one-vue-bulma-dashboard-master/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/maciej/Pulpit/admin-one-vue-bulma-dashboard-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/maciej/Pulpit/admin-one-vue-bulma-dashboard-master/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ttable {\n  font-family: arial, sans-serif;\n  border-collapse: collapse;\n  width: 100%;\n}\n\ntd, th {\n  border: 1px solid #dddddd;\n  text-align: left;\n  padding: 8px;\n}\n\ntr:nth-child(even) {\n  background-color: #dddddd;\n}\n.paginator{\n\twidth:45px;\n}\n",{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwPA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views","sourcesContent":["<template>\n\t<div>\n\t\t<p>\n\t\t\t<button @click=\"firstPage()\">First</button> \n\t\t\t<button @click=\"previousPage()\">Previous</button>\n\t\t\t<input class=\"paginator\" type=\"number\" v-model=\"incurrentPage\" @input=\"pageInput()\"> \n\t\t\t<button @click=\"nextPage()\">Next</button>\n\t\t\t<button @click=\"lastPage()\">Last</button>\n\t\t\t\n\t\t\t{{currentPage}} of {{totalPages}}\n\t\t</p>\n\t\t<table class=\"table\">\n\t\t\t<thead>\n\t\t\t\t<tr class=\"column-names\">\n\t\t\t\t\t<th v-if=\"showDetailsButton\"></th>\n\t\t\t\t\t<th v-for=\"(column, cidx) in columns\" :key=\"cidx\">\n\t\t\t\t\t\t<span v-if=\"!column.is_sortable\">{{ column.name }}</span>\n\t\t\t\t\t\t<a v-else href=\"#\" @click.prevent=\"setColumnSort(column.code)\">\n\t\t\t\t\t\t\t{{ column.name }}\n\t\t\t\t\t\t\t<template v-if=\"columnSortName === column.code\">\n\t\t\t\t\t\t\t\t<span v-if=\"columnSortOrder === 'asc'\">&uarr;</span>\n\t\t\t\t\t\t\t\t<span v-else>&darr;</span>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</th>\n\t\t\t\t</tr>\n\t\t\t\t<tr class=\"column-filters\">\n\t\t\t\t\t<th v-if=\"showDetailsButton\"></th>\n\t\t\t\t\t<th v-for=\"(column, cidx) in columns\" :key=\"cidx\">\n\t\t\t\t\t\t<div v-if=\"column.is_filterable\">\n\t\t\t\t\t\t\t<div v-if=\"column.datatype === 'string'\">\n\t\t\t\t\t\t\t\t<input type=\"text\" v-model=\"column.query\" @input=\"onInput()\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-if=\"column.datatype === 'boolean'\">\n\t\t\t\t\t\t\t\t<select @change=\"onChange(column, $event)\">\n\t\t\t\t\t\t\t\t\t<option :value=\"null\">All</option>\n\t\t\t\t\t\t\t\t\t<option :value=\"true\">True</option>\n\t\t\t\t\t\t\t\t\t<option :value=\"false\">False</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-if=\"typeof column.datatype === 'Object'\">\n\t\t\t\t\t\t\t\t<select>\n\t\t\t\t\t\t\t\t\t<option :value=\"null\">All</option>\n\t\t\t\t\t\t\t\t\t<option v-for=\"(type, cdidx) in column.datatype\" :key=\"cdidx\" :value=\"null\">{{ type }}</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t{{column.query}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody v-for=\"(item, id) in listitems\" :key=\"id\">\n\t\t\t\t<tr>\n\t\t\t\t\t<td v-if=\"showDetailsButton\">\n\t\t\t\t\t\t<button v-if=\"typeof item.details !== 'undefined'\" type=\"button\" class=\"btn btn-primary\" @click.prevent=\"toggleDetails(item)\">V</button>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td v-for=\"(column, cidx) in columns\" :key=\"cidx\">\n\t\t\t\t\t\t<template v-if=\"column.code === 'avatar'\">\n\t\t\t\t\t\t\t<img width=\"80\" height=\"80\" :src=\"item['avatar']\" alt=\"\">\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else-if=\"column.code === 'sex'\">\n\t\t\t\t\t\t\t<span v-if=\"item['sex'] === 'male'\">Chop</span>\n\t\t\t\t\t\t\t<span v-else>Baba</span>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else-if=\"column.code === 'name'\">\n\t\t\t\t\t\t\t<router-link :to=\"`details/${item['id']}`\">{{ item[column.code] }}</router-link>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>{{ item[column.code] }}</template>\n\t\t\t\t\t</td>\n\t\t\t\t\t<!-- <td>{{item.id}}</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<router-link :to=\"`details/${item.id}`\">{{item.title}}</router-link>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>{{item.author}}</td> -->\n\t\t\t\t</tr>\n\t\t\t\t<tr v-if=\"typeof item.details !== 'undefined' && item.detailsVisible\">\n\t\t\t\t\t<td colspan=\"999\">\n\t\t\t\t\t\t<strong>Opis:</strong> {{ item.details.description }}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t</div>\n</template>\n\n<script>\n\timport { api } from \"../main.js\";\n\t\n\texport default {\n\t\tname: 'list',\n\t\tdata () {\n\t\t\treturn {\n\t\t\t\tshowDetailsButton: true,\n\t\t\t\tcolumnSortName: null,\n\t\t\t\tcolumnSortOrder: 'asc', // asc, desc\n\t\t\t\tcurrentPage: 1,\n\t\t\t\ttotalPages: 1,\n\t\t\t\tincurrentPage: null,\n\t\t\t\tcolumns: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'ID',\n\t\t\t\t\t\tcode: 'id',\n\t\t\t\t\t\tis_sortable: true,\n\t\t\t\t\t\tis_filterable: true,\n\t\t\t\t\t\tdatatype: 'string',\n\t\t\t\t\t\tquery: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '',\n\t\t\t\t\t\tcode: 'avatar',\n\t\t\t\t\t\tis_sortable: false,\n\t\t\t\t\t\tis_filterable: false,\n\t\t\t\t\t\tdatatype: 'string',\n\t\t\t\t\t\tquery: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Name',\n\t\t\t\t\t\tcode: 'name',\n\t\t\t\t\t\tis_sortable: true,\n\t\t\t\t\t\tis_filterable: true,\n\t\t\t\t\t\tdatatype: 'string',\n\t\t\t\t\t\tquery: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Sex',\n\t\t\t\t\t\tcode: 'sex',\n\t\t\t\t\t\tis_sortable: true,\n\t\t\t\t\t\tis_filterable: true,\n\t\t\t\t\t\tdatatype: ['male', 'female'],\n\t\t\t\t\t\tquery: null\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Phone',\n\t\t\t\t\t\tcode: 'phone',\n\t\t\t\t\t\tis_sortable: false,\n\t\t\t\t\t\tis_filterable: true,\n\t\t\t\t\t\tdatatype: 'string',\n\t\t\t\t\t\tquery: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Email',\n\t\t\t\t\t\tcode: 'email',\n\t\t\t\t\t\tis_sortable: false,\n\t\t\t\t\t\tis_filterable: false,\n\t\t\t\t\t\tdatatype: 'string',\n\t\t\t\t\t\tquery: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Is active',\n\t\t\t\t\t\tcode: 'is_active',\n\t\t\t\t\t\tis_sortable: true,\n\t\t\t\t\t\tis_filterable: true,\n\t\t\t\t\t\tdatatype: 'boolean',\n\t\t\t\t\t\tquery: null\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tlistitems: [],\n\t\t\t\tfilters: [],\n\t\t\t}\n\t\t},\t\t\n\t\tcomputed: {\n\n\t\t},\n\t\t\tcreated () {\n\t\t\t\tthis.askForPosts();\n\t\t},\n\t\tmethods: {\n\t\t\tobjectToQuery (obj) {\n\t\t\t\treturn Object.keys(obj).reduce((str, key, i) => {\n\t\t\t\t\tlet delimiter = i === 0 ? '?' : '&';\n\t\t\t\t\tlet keyname = encodeURIComponent(key);\n\t\t\t\t\tlet val = encodeURIComponent(obj[key]);\n\t\t\t\t\treturn [str, delimiter, keyname, '=', val].join('');\n\t\t\t\t}, '');\n\t\t\t},\n\t\t\tasync askForPosts () {\n\t\t\t\tconsole.log(this.filters);\n\t\t\t\tconsole.log('change page');\n\t\t\t\tconst query = {\n\t\t\t\t\t_sort: this.columnSortName,\n\t\t\t\t\t_order: this.columnSortOrder,\n\t\t\t\t\t_page: this.currentPage,\n\t\t\t\t\tq: this.filters.map((val) => `${val.code}:${val.query}`).join('||')\n\t\t\t\t};\n\t\t\t\tconsole.log(query, this.objectToQuery(query));\n\t\t\t\t// google: object to url\n\t\t\t\tconst meta = {current: 1, total: 3};\n\t\t\t\tconst {ok, data} = await api.get(`posts${this.objectToQuery(query)}`);\n\t\t\t\tif (ok) {\n\t\t\t\t\tthis.listitems = data.map(r => ({...r, detailsVisible: false}));\n\t\t\t\t\t//this.currentPage = meta.current;\n\t\t\t\t\tthis.totalPages = meta.total;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetColumnSort (columnCode) {\n\t\t\t\tif (columnCode === this.columnSortName) {\n\t\t\t\t\tthis.columnSortOrder = ( this.columnSortOrder === 'asc' ) ? 'desc' : 'asc';\n\t\t\t\t} else {\n\t\t\t\t\tthis.columnSortName = columnCode;\n\t\t\t\t}\n\t\t\t\tthis.askForPosts();\n\t\t\t},\n\t\t\ttoggleDetails (dataRow) {\n\t\t\t\tdataRow.detailsVisible = !dataRow.detailsVisible;\n\t\t\t},\n\t\t\tonInput () {\n\t\t\t\tlet filters = this.columns.filter(e => e.is_filterable && e.query != '' && e.query != null)\n\t\t\t\tthis.filters = filters;\n\t\t\t\tthis.askForPosts();\n\t\t\t},\n\t\t\tpageInput (){\n\t\t\t\tif(this.incurrentPage<=this.totalPages && this.incurrentPage>0){\n\t\t\t\tthis.currentPage=this.incurrentPage;\n\t\t\t\tthis.askForPosts();\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tthis.incurrentPage=this.totalPages;\n\t\t\t\t}\n\t\t\t},\n\t\t\tonChange (column, element) {\n\t\t\t\tconsole.log(column, element);\n\t\t\t},\n\t\t\tnextPage () {\n\t\t\t\tif(this.currentPage < this.totalPages) \n\t\t\t\tthis.currentPage++;\n\t\t\t\tthis.askForPosts();\n\t\t\t\tconsole.log(this.currentPage);\n\t\t\t},\n\t\t\tpreviousPage () {\n\t\t\t\tif(this.currentPage > 1)\n\t\t\t\tthis.currentPage--;\n\t\t\t\tthis.askForPosts();\n\t\t\t\tconsole.log(this.currentPage);\n\t\t\t},\n\t\t\tfirstPage () {\n\t\t\t\tthis.currentPage=1;\n\t\t\t\tthis.askForPosts();\n\t\t\t\tconsole.log(this.currentPage);\n\t\t\t},\n\t\t\tlastPage () {\n\t\t\t\tthis.currentPage=this.totalPages;\n\t\t\t\tthis.askForPosts();\n\t\t\t\tconsole.log(this.currentPage);\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\ttable {\n  font-family: arial, sans-serif;\n  border-collapse: collapse;\n  width: 100%;\n}\n\ntd, th {\n  border: 1px solid #dddddd;\n  text-align: left;\n  padding: 8px;\n}\n\ntr:nth-child(even) {\n  background-color: #dddddd;\n}\n.paginator{\n\twidth:45px;\n}\n</style>"]}]}